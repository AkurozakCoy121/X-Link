<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexeID - URL Shortener & Redirect</title>
    
    <!-- ADS SCRIPT -->
    <script>
        self.options = { domain: '3nbf4.com', zoneId: 10380831 };
    </script>
    <script src="https://3nbf4.com/act/files/service-worker.min.js?r=sw"></script>
    <script>(function(s){s.dataset.zone='10380855',s.src='https://al5sm.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>

    
<script>(function(s){s.dataset.zone='10380855',s.src='https://al5sm.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
<script>(function(s){s.dataset.zone='10380895',s.src='https://nap5k.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
    <!-- END ADS -->
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, sans-serif; }
        body { background: #f8f9fa; color: #333; min-height: 100vh; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 600px; background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); padding: 40px; margin-top: 40px; }
        .logo { font-size: 40px; margin-bottom: 12px; color: #1a5fb4; text-align: center; }
        h1 { font-size: 28px; font-weight: 600; color: #1a1f2e; margin-bottom: 8px; text-align: center; }
        .tagline { color: #666; font-size: 16px; margin-bottom: 32px; text-align: center; }
        
        /* FORM */
        .input-group { display: flex; gap: 12px; margin-bottom: 16px; }
        input[type="text"], input[type="url"] { flex: 1; padding: 14px 18px; font-size: 16px; border: 2px solid #e1e4e8; border-radius: 8px; outline: none; }
        input:focus { border-color: #1a5fb4; }
        button { padding: 14px 28px; background: #1a5fb4; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; }
        button:hover { background: #0d4a9c; }
        
        /* ALIAS CHECK */
        .alias-check { margin: 20px 0; padding: 15px; background: #f1f8ff; border-radius: 8px; border-left: 4px solid #1a5fb4; }
        .alias-available { color: #2ea043; font-weight: 600; }
        .alias-taken { color: #da3633; font-weight: 600; }
        
        /* RESULT */
        .result { margin-top: 24px; padding: 20px; background: #f1f8ff; border-radius: 8px; border-left: 4px solid #1a5fb4; display: none; }
        .short-url { font-family: monospace; font-size: 15px; word-break: break-all; padding: 12px; background: white; border-radius: 6px; border: 1px solid #e1e4e8; margin: 12px 0; }
        
        /* QUICK LINKS */
        .quick-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin: 24px 0; }
        .quick-link { padding: 10px 20px; background: #f8f9fa; border-radius: 20px; text-decoration: none; color: #1a5fb4; font-size: 14px; border: 1px solid #e1e4e8; }
        .quick-link:hover { background: #e9ecef; }
        
        footer { margin-top: 40px; text-align: center; color: #999; font-size: 13px; }
        
        @media (max-width: 640px) {
            .container { padding: 30px 20px; }
            .input-group { flex-direction: column; }
            button { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">ðŸ”—</div>
        <h1>NexeID</h1>
        <p class="tagline">Custom alias URL shortener</p>
        
        <!-- ALIAS CHECK FORM -->
        <div class="input-group">
            <input type="text" id="aliasInput" placeholder="your-alias" oninput="checkAlias()">
            <input type="url" id="urlInput" placeholder="https://destination.com" oninput="checkAlias()">
            <button onclick="createRedirect()">Create</button>
        </div>
        
        <!-- ALIAS STATUS -->
        <div class="alias-check" id="aliasStatus" style="display:none;">
            Status: <span id="statusText"></span><br>
            <small id="statusDetail"></small>
        </div>
        
        <!-- RESULT -->
        <div class="result" id="result">
            <h3>âœ… Your Custom Link is Ready!</h3>
            <div class="short-url" id="generatedUrl"></div>
            <button onclick="copyLink()">Copy Link</button>
            <p style="margin-top: 12px; font-size: 14px; color: #666;">
                This link will redirect instantly (no countdown)
            </p>
        </div>
        
        <!-- EXISTING ALIASES -->
        <div style="margin-top: 32px;">
            <h3 style="font-size: 16px; color: #666; margin-bottom: 16px;">Available Aliases:</h3>
            <div class="quick-grid">
                <a href="/github" class="quick-link">github</a>
                <a href="/yt" class="quick-link">yt</a>
                <a href="/twitter" class="quick-link">twitter</a>
                <a href="/donate" class="quick-link">donate</a>
                <a href="/rickroll" class="quick-link">rickroll</a>
                <a href="/repo" class="quick-link">repo</a>
            </div>
        </div>
        
        <div style="margin-top: 32px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
            <p><strong>How it works:</strong> Claim a custom alias (e.g., "github") and point it to any URL.</p>
            <p><strong>Example:</strong> <code>nexeid.my.id/github</code> â†’ goes to GitHub</p>
        </div>
    </div>
    
    <footer>
        <p>Â© 2025 NexeID â€¢ <a href="https://nexeid.my.id" style="color:#1a5fb4;">nexeid.my.id</a></p>
    </footer>
    
    <script>
        // PREDEFINED ALIAS DATABASE (simpan di localStorage)
        let aliasDB = {
            'github': 'https://github.com',
            'gh': 'https://github.com',
            'yt': 'https://youtube.com',
            'youtube': 'https://youtube.com',
            'twitter': 'https://twitter.com',
            'tw': 'https://twitter.com',
            'instagram': 'https://instagram.com',
            'ig': 'https://instagram.com',
            'donate': 'https://saweria.co/omedonation',
            'support': 'https://saweria.co/omedonation',
            'rickroll': 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
            'secret': 'https://www.youtube.com/watch?v=jNQXAC9IVRw',
            'repo': 'https://github.com/AkurozakCoy121/X-Link',
            'xlink': 'https://github.com/AkurozakCoy121/X-Link',
            'spotify': 'https://open.spotify.com',
            'music': 'https://open.spotify.com'
        };
        
        // Load user's custom aliases from localStorage
        let userAliases = JSON.parse(localStorage.getItem('nexeid_aliases')) || {};
        
        // Merge databases
        let allAliases = { ...aliasDB, ...userAliases };
        
        // CHECK IF CURRENT PATH IS AN ALIAS
        const currentPath = window.location.pathname.replace(/^\//, '');
        
        if (currentPath && currentPath !== 'index.html' && currentPath !== '') {
            // THIS IS AN ALIAS REQUEST!
            if (allAliases[currentPath]) {
                // Redirect immediately
                window.location.href = allAliases[currentPath];
            } else {
                // Show "claim this alias" page
                document.body.innerHTML = `
                    <div class="container">
                        <div class="logo">ðŸ”—</div>
                        <h1>Alias "${currentPath}" is Available!</h1>
                        <p style="margin: 20px 0; color: #666;">This alias is not yet claimed. Want to claim it?</p>
                        <div class="input-group">
                            <input type="url" id="claimUrl" placeholder="https://destination.com" style="flex:1;">
                            <button onclick="claimAlias('${currentPath}')">Claim "${currentPath}"</button>
                        </div>
                        <p style="margin-top: 20px; font-size: 14px; color: #888;">
                            Or <a href="/" style="color:#1a5fb4;">go back to homepage</a>
                        </p>
                    </div>
                `;
            }
        }
        
        // CHECK ALIAS AVAILABILITY
        function checkAlias() {
            const alias = document.getElementById('aliasInput').value.trim().toLowerCase();
            const url = document.getElementById('urlInput').value.trim();
            
            const statusDiv = document.getElementById('aliasStatus');
            const statusText = document.getElementById('statusText');
            const statusDetail = document.getElementById('statusDetail');
            
            if (!alias) {
                statusDiv.style.display = 'none';
                return;
            }
            
            // Validasi alias format
            const aliasRegex = /^[a-z0-9\-]+$/;
            if (!aliasRegex.test(alias)) {
                statusDiv.style.display = 'block';
                statusText.innerHTML = '<span class="alias-taken">Invalid format</span>';
                statusDetail.textContent = 'Only lowercase letters, numbers, and hyphens allowed';
                return;
            }
            
            // Cek apakah alias sudah dipakai
            if (allAliases[alias]) {
                statusDiv.style.display = 'block';
                statusText.innerHTML = '<span class="alias-taken">Already taken</span>';
                statusDetail.textContent = `Redirects to: ${allAliases[alias]}`;
            } else {
                statusDiv.style.display = 'block';
                statusText.innerHTML = '<span class="alias-available">Available!</span>';
                statusDetail.textContent = `nexeid.my.id/${alias} will be yours`;
            }
        }
        
        // CREATE REDIRECT
        function createRedirect() {
            const alias = document.getElementById('aliasInput').value.trim().toLowerCase();
            let url = document.getElementById('urlInput').value.trim();
            
            if (!alias || !url) {
                alert('Please fill both alias and URL');
                return;
            }
            
            // Validasi alias
            const aliasRegex = /^[a-z0-9\-]+$/;
            if (!aliasRegex.test(alias)) {
                alert('Alias can only contain lowercase letters, numbers, and hyphens');
                return;
            }
            
            // Cek ketersediaan
            if (allAliases[alias]) {
                alert(`Alias "${alias}" is already taken!`);
                return;
            }
            
            // Tambah https jika perlu
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }
            
            // Validasi URL
            try {
                new URL(url);
            } catch {
                alert('Please enter a valid URL');
                return;
            }
            
            // Simpan ke database user
            userAliases[alias] = url;
            localStorage.setItem('nexeid_aliases', JSON.stringify(userAliases));
            
            // Update global database
            allAliases[alias] = url;
            
            // Tampilkan hasil
            const shortUrl = `https://nexeid.my.id/${alias}`;
            document.getElementById('generatedUrl').textContent = shortUrl;
            document.getElementById('result').style.display = 'block';
            
            // Reset form
            document.getElementById('aliasInput').value = '';
            document.getElementById('urlInput').value = '';
            document.getElementById('aliasStatus').style.display = 'none';
        }
        
        // CLAIM ALIAS dari halaman khusus
        function claimAlias(alias) {
            const url = document.getElementById('claimUrl').value.trim();
            
            if (!url) {
                alert('Please enter a destination URL');
                return;
            }
            
            // Tambah https jika perlu
            let finalUrl = url;
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                finalUrl = 'https://' + url;
            }
            
            // Validasi URL
            try {
                new URL(finalUrl);
            } catch {
                alert('Please enter a valid URL');
                return;
            }
            
            // Simpan
            userAliases[alias] = finalUrl;
            localStorage.setItem('nexeid_aliases', JSON.stringify(userAliases));
            
            // Redirect ke alias yang baru dibuat
            window.location.href = `/${alias}`;
        }
        
        // COPY LINK
        function copyLink() {
            const link = document.getElementById('generatedUrl').textContent;
            navigator.clipboard.writeText(link)
                .then(() => {
                    alert('âœ… Link copied to clipboard!');
                })
                .catch(() => {
                    alert('Failed to copy. Please copy manually.');
                });
        }
        
        // Initialize (jika di homepage)
        if (!currentPath) {
            document.getElementById('aliasInput').focus();
        }
    </script>
</body>
</html>
